<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus - Diagrama UML</title>
    <meta name="description" content="Diagrama de clases UML que muestra la arquitectura y relaciones principales de la aplicación Nexus.">
    <link rel="icon" type="image/png" href="../assets/logo.png">
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/glassmorphism.css">
    <link rel="stylesheet" href="../styles/uml-styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-icons-font@v13/font/simple-icons.min.css">

    <meta property="og:title" content="Nexus - Diagrama UML">
    <meta property="og:description" content="Diagrama de clases UML de la arquitectura de Nexus.">
    <meta property="og:image" content="https://nexus-app.es/assets/logo.png">
    <meta property="og:url" content="https://nexus-app.es/document-uml.html">
    <meta property="og:type" content="article">
</head>
<body>

    <main class="uml-page-wrapper">
        <div class="uml-header-content">
            <a href="../moreinfo.html" class="back-button">&larr; Volver al menú</a>
            <h1>Diagrama UML</h1>
        </div>

        <div class="uml-documentation">
             <nav class="toc">
                <h2 class="toc-title">Índice</h2>
                <ul class="toc-list">
                    <li class="toc-item"><a href="#introduccion-uml" class="toc-link">Introducción</a></li>
                    <li class="toc-item"><a href="#actores-principales" class="toc-link">1. Actores y Usuarios</a></li>
                    <li class="toc-item toc-subitem"><a href="#clase-actor" class="toc-link">Clase Base: Actor</a></li>
                    <li class="toc-item toc-subitem"><a href="#subclases-actor" class="toc-link">Subclases: Usuario, Empresa, Admin</a></li>
                    <li class="toc-item"><a href="#gestion-comercial" class="toc-link">2. Gestión Comercial</a></li>
                    <li class="toc-item toc-subitem"><a href="#productos-ofertas" class="toc-link">Productos y Ofertas</a></li>
                    <li class="toc-item toc-subitem"><a href="#compras-contratos" class="toc-link">Compras y Contratos</a></li>
                    <li class="toc-item"><a href="#interaccion" class="toc-link">3. Interacción y Mensajería</a></li>
                    <li class="toc-item"><a href="#relaciones" class="toc-link">Relaciones entre Clases</a></li>
                     <li class="toc-item"><a href="#esquema-uml" class="toc-link">Esquema Gráfico</a></li>
                </ul>
            </nav>

            <h3 id="introduccion-uml">Introducción al Modelo de Datos de Nexus</h3>
            <p>Este documento refleja la estructura de datos actualizada de Nexus. El modelo se centra en una arquitectura de herencia donde todos los participantes del sistema derivan de una clase común <code>Actor</code>, permitiendo una gestión unificada de credenciales mientras se especializan los roles en <code>Usuario</code>, <code>Empresa</code> y <code>Admin</code>. El sistema gestiona tanto la venta directa de productos de segunda mano como la publicación de ofertas externas y contratos publicitarios.</p>

            <h3 id="actores-principales">1. Actores y Usuarios</h3>
            
            <h4 id="clase-actor">ACTOR (Clase Base)</h4>
            <p><strong>Propósito:</strong> Clase padre que engloba los atributos comunes para cualquier entidad que acceda al sistema.</p>
            <ul>
                <li><strong>id: Integer:</strong> Identificador único del actor.</li>
                <li><strong>user: String:</strong> Nombre de usuario o alias.</li>
                <li><strong>email: String:</strong> Correo electrónico para autenticación y contacto.</li>
                <li><strong>password: String:</strong> Contraseña de acceso cifrada.</li>
                <li><strong>fechaRegistro: DateTime:</strong> Fecha de alta en el sistema.</li>
                <li><strong>rol: TiposRol:</strong> Define si es Admin, Usuario o Empresa.</li>
            </ul>
            <p><strong>Métodos:</strong> <code>registrarse(datos)</code>, <code>iniciarSesion(credenciales)</code>, <code>editarPerfil(datos)</code>.</p>

            <h4 id="subclases-actor">Subclases de Actor</h4>
            
            <h5>USUARIO (Extiende de Actor)</h5>
            <p><strong>Propósito:</strong> Representa al usuario particular estándar que interactúa en la plataforma comprando, vendiendo o comentando.</p>
            <ul>
                <li><strong>telefono: String:</strong> Número de contacto.</li>
                <li><strong>esVerificado: Boolean:</strong> Indica si el perfil ha validado su identidad.</li>
                <li><strong>fotoPerfil: String (URL):</strong> Imagen del usuario.</li>
                <li><strong>biografia: String:</strong> Descripción personal.</li>
                <li><strong>ubicacion: String:</strong> Localización geográfica.</li>
                <li><strong>reputacion: Integer:</strong> Valoración numérica basada en su actividad.</li>
            </ul>

            <h5>EMPRESA (Extiende de Actor)</h5>
            <p><strong>Propósito:</strong> Entidad corporativa que utiliza Nexus para establecer contratos publicitarios.</p>
            <ul>
                <li><strong>cif: String:</strong> Código de Identificación Fiscal único.</li>
            </ul>

            <h5>ADMIN (Extiende de Actor)</h5>
            <p><strong>Propósito:</strong> Administrador del sistema con permisos elevados.</p>
            <ul>
                <li><strong>nivelAcceso: Integer:</strong> Grado de privilegios dentro del panel de administración.</li>
            </ul>

            <h3 id="gestion-comercial">2. Gestión Comercial y Contenido</h3>

            <h4 id="productos-ofertas">Productos y Ofertas</h4>

            <h5>PRODUCTO</h5>
            <p><strong>Propósito:</strong> Artículo físico puesto a la venta dentro de la plataforma (generalmente segunda mano).</p>
            <ul>
                <li><strong>id: Integer:</strong> Identificador único del producto.</li>
                <li><strong>titulo: String:</strong> Nombre del producto.</li>
                <li><strong>descripcion: String:</strong> Detalles del artículo.</li>
                <li><strong>precio: Double:</strong> Coste del producto.</li>
                <li><strong>tipoOferta: TipoOferta:</strong> Categorización de la oferta.</li>
                <li><strong>estadoProducto: EstadoProducto (Enum):</strong> Condición actual (<code>DISPONIBLE</code>, <code>RESERVADO</code>, <code>VENDIDO</code>).</li>
            </ul>
            <p><strong>Métodos:</strong> <code>publicar()</code>, <code>eliminar()</code>.</p>

            <h5>OFERTA</h5>
            <p><strong>Propósito:</strong> Promoción o enlace a un producto externo (ofertas de internet).</p>
            <ul>
                <li><strong>urlOferta: String:</strong> Enlace externo a la oferta.</li>
                <li><strong>tienda: String:</strong> Nombre del comercio (ej. Amazon, PcComponentes).</li>
                <li><strong>precioOferta: Double:</strong> Precio rebajado.</li>
                <li><strong>precioOriginal: Double (opcional):</strong> Precio anterior para comparar.</li>
                <li><strong>fechaExpiracion: DateTime (opcional):</strong> Cuándo caduca la oferta.</li>
            </ul>

            <h4 id="compras-contratos">Compras y Contratos</h4>

            <h5>COMPRA</h5>
            <p><strong>Propósito:</strong> Registro de una transacción realizada por un Usuario sobre un Producto.</p>
            <ul>
                <li><strong>precioFinal: Double:</strong> Precio al que se cerró la transacción.</li>
                <li><strong>fechaCompra: Date:</strong> Fecha de la operación.</li>
                <li><strong>estadoCompra: EstadoCompra (Enum):</strong> Situación de la transacción (<code>ACEPTADO</code>, <code>PENDIENTE</code>, <code>RECHAZADO</code>).</li>
            </ul>

            <h5>CONTRATO</h5>
            <p><strong>Propósito:</strong> Acuerdo comercial entre una Empresa y Nexus.</p>
            <ul>
                <li><strong>id: Integer:</strong> Identificador del contrato.</li>
                <li><strong>tipoContrato: TipoContrato (Enum):</strong> Modalidad del servicio (<code>BANNER</code>, <code>PUBLICACION</code>).</li>
            </ul>

            <h3 id="interaccion">3. Interacción y Mensajería</h3>

            <h5>MENSAJE</h5>
            <p><strong>Propósito:</strong> Comunicación directa escrita por un Usuario.</p>
            <ul>
                <li><strong>id: Integer:</strong> Identificador del mensaje.</li>
                <li><strong>fechaCreacion: DateTime:</strong> Marca de tiempo del envío.</li>
                <li><strong>estaActivo: Boolean:</strong> Estado de visibilidad del mensaje.</li>
            </ul>

            <h5>COMENTARIO</h5>
            <p><strong>Propósito:</strong> Opiniones o preguntas públicas realizadas sobre Ofertas.</p>
            <ul>
                <li><strong>id: Integer:</strong> Identificador del comentario.</li>
                <li><strong>texto: String:</strong> Contenido del comentario.</li>
                <li><strong>fecha: DateTime:</strong> Fecha de publicación.</li>
                <li><strong>esReportado: Boolean:</strong> Flag de moderación.</li>
            </ul>
            <p><strong>Métodos:</strong> <code>reportar()</code>.</p>

            <h3 id="relaciones">Relaciones entre Clases (Asociaciones)</h3>
             <p>Las conexiones principales definidas en el diagrama son:</p>
             <ul>
                 <li><strong>ACTOR publica OFERTA (1 a 0..*):</strong> Cualquier actor registrado puede compartir ofertas externas.</li>
                 <li><strong>ACTOR comenta COMENTARIO (1 a 0..*):</strong> Los actores generan comentarios.</li>
                 <li><strong>OFERTA tiene COMENTARIO (1 a 0..*):</strong> Los comentarios están vinculados a una oferta específica.</li>
                 <li><strong>USUARIO escribe MENSAJE (1 a 0..*):</strong> Los usuarios envían mensajes (chat/soporte).</li>
                 <li><strong>USUARIO publica PRODUCTO (1 a 0..*):</strong> Los usuarios ponen a la venta sus propios productos.</li>
                 <li><strong>USUARIO realiza COMPRA (1 a 0..*):</strong> Un usuario puede realizar múltiples compras.</li>
                 <li><strong>COMPRA pertenece a PRODUCTO (0..* a 1):</strong> Una compra se refiere a un producto específico.</li>
                 <li><strong>EMPRESA realiza CONTRATO (1 a 0..*):</strong> Las empresas firman contratos de publicidad.</li>
             </ul>

             <h4>Enumeraciones (Enums)</h4>
             <ul>
                 <li><strong>TIPOCONTRATO:</strong> BANNER, PUBLICACION.</li>
                 <li><strong>ESTADOCOMPRA:</strong> ACEPTADO, PENDIENTE, RECHAZADO.</li>
                 <li><strong>ESTADOPRODUCTO:</strong> DISPONIBLE, RESERVADO, VENDIDO.</li>
             </ul>
        </div>

        <div class="uml-diagram-container">
            <h2 id="esquema-uml" class="uml-diagram-title styled-title">Esquema Gráfico - Clic para ampliar</h2><br>
            <img src="../assets/UML.png" alt="Diagrama de Clases UML de Nexus" class="plantuml-diagram-image" id="umlImage">
        </div>
    </main>

    <div id="imageZoomModal" class="image-zoom-modal">
        <span class="close-button" id="closeModalButton">&times;</span>
        <img class="modal-content" id="zoomedImage">
        <div id="caption" class="caption"></div>
    </div>

    <footer class="advanced-footer">
        <div class="footer-grid-container">
            <div class="footer-section footer-brand">
                <h3>Nexus.</h3>
                <p>Deja de buscar, empieza a encontrar.</p>
            </div>
            <div class="footer-section footer-links">
                <h3>Legal</h3>
                <ul>
                    <li><a href="../legal/terms.html">Términos de Servicio</a></li>
                    <li><a href="../legal/privacy.html">Política de Privacidad</a></li>
                </ul>
            </div>
            <div class="footer-section footer-social">
                <h3>Síguenos</h3>
                <div class="social-icons">
                    <a href="https://x.com/somosnexusapp" target="_blank" title="X (Twitter)"><i class="si si-x"></i></a>
                    <a href="https://www.instagram.com/somosnexusapp/" target="_blank" title="Instagram"><i class="si si-instagram"></i></a>
                    <a href="https://www.tiktok.com/@nexusapp?lang=es" target="_blank" title="TikTok"><i class="si si-tiktok"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Nexus App. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById("imageZoomModal");
            const img = document.getElementById("umlImage");
            const modalImg = document.getElementById("zoomedImage");
            const captionText = document.getElementById("caption");
            const closeModalButton = document.getElementById("closeModalButton");

            let zoomLevel = 0; 

            if (img && modal && modalImg && captionText && closeModalButton) {
                img.onclick = function(){
                    modal.style.display = "flex"; 
                    modalImg.src = this.src;
                    captionText.innerHTML = this.alt;
                    modalImg.classList.remove('zoomed-further');
                    modalImg.classList.remove('zoomed-even-further');
                    zoomLevel = 0;
                    document.body.style.overflow = "hidden";
                }

                const closeModal = () => {
                    modal.style.display = "none";
                    document.body.style.overflow = "auto";
                }

                closeModalButton.onclick = closeModal;

                 modal.addEventListener('click', function(event) {
                    if (event.target === modal) { 
                        closeModal();
                    }
                });

                 modalImg.onclick = function(event) {
                     event.stopPropagation(); 
                     if (zoomLevel === 0) {
                         this.classList.add('zoomed-further');
                         zoomLevel = 1;
                     } else if (zoomLevel === 1) {
                         this.classList.remove('zoomed-further');
                         this.classList.add('zoomed-even-further');
                         zoomLevel = 2;
                     } else { 
                         this.classList.remove('zoomed-even-further');
                         zoomLevel = 0; 
                     }
                 }

                document.addEventListener('keydown', function(event) {
                    if (event.key === 'Escape' && modal.style.display === 'flex') {
                        closeModal();
                    }
                });
            }
        });
    </script>
</body>
</html>